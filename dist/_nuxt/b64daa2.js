(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{537:function(e,t,o){var content=o(628);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("d750c4ec",content,!0,{sourceMap:!1})},626:function(e,t,o){var n;n=()=>(()=>{var e={45:(e,t,o)=>{e.exports=o(78)},78:(e,t,o)=>{"use strict";o.r(t),o.d(t,{download:()=>R,downloadPart:()=>E,getBlobData:()=>M,getSupports:()=>B,initRecord:()=>k,startRecord:()=>S,stopRecord:()=>I});const n=o.p+"images/action.png";var r,i,s,a,l,c,d,p,u="",m=1,f=0,v=null,h="00:00",y=null,g=(h="00:00",[]),b=[],w=[],x="",_=null,T=null;async function k(e="",t={}){await B(),i={audioBitsPerSecond:t.audioBitsPerSecond||128e3,videoBitsPerSecond:t.videoBitsPerSecond||25e5,mimeType:t.mimeType||w[0]||"video/webm"},c=t.videoSize||1024,m=t.appendType||1,r=t.constants||{audio:!0,video:!0},t.outputType&&(x=t.outputType),u=e,t.noRender||(T=null,function(){const e=H("div",{class:"srtab__block_timing",text:"00:00"}),t=H("img",{class:"srtab__block_img",src:n,style:"width:18px;height:18px;margin-right:4px;"}),o=H("div",{class:"srtab__block",child:[t,e],style:"/* 布局 */width:100%;font-size: 14px;line-height:20px;display: flex;align-items: center;justify-content: center;"}),r=H("div",{class:"srtab__btn",style:"/* 布局 */height:24px;line-height:24px;display: flex;align-items: center;justify-content: center;transition: .3s all ease;overflow:hidden;"});let i=["开始录制","下载切片","下载整片","结束录制"];for(let e=0;e<i.length;e++){let t=H("div",{class:"srtab__btn_item",text:i[e],style:"padding: 0 8px;cursor: pointer;border-radius:6px;transition: .3s all ease-in",mouseover:function(){this.style.backgroundColor="#f5f5f6"},mouseout:function(){this.style.backgroundColor="transparent"}});switch(i[e]){case"开始录制":t.onclick=S;break;case"下载切片":t.onclick=E;break;case"下载整片":t.onclick=R;break;case"结束录制":t.onclick=I}r.appendChild(t)}if(T=H("div",{class:"srtab",child:[o,r],style:"position: fixed;top: 0px;left: 0;right: 0;z-index: 1200;margin: auto;padding: 4px 8px;width: fit-content;min-width:60px;background: #fff;border: 1px solid #f5f5f5;border-radius: 0px 0px 12px 12px;box-shadow: 0px 6px 8px 0px rgba(199, 199, 199, 0.16);/* 字体 */font-size: 12px;line-height: 1.4;color: #28282a;opacity:0;transition:.3s opacity ease;",mouseenter:z,mouseleave:O}),document){if(1==m)document.body.appendChild(T);else if(2==m)document.getElementById(u).appendChild(T);else{const e=document.getElementById(u);e.parentNode.replaceChild(T,e)}setTimeout((()=>{T.style.opacity=1}),500)}}()),window.addEventListener("hashchange",(e=>{j(),T&&(document.body.removeChild(T),T=null)})),window.addEventListener("popstate",(e=>{j(),T&&(document.body.removeChild(T),T=null)})),(d=document.getElementById("sr-live"))&&(d.autoplay="true",d.controls="controls"),(p=document.getElementById("sr-preview"))&&(p.controls="controls")}function B(){const e=["vp9","vp9.0","vp8","vp8.0","avc1","av1","h265","h264"],t=MediaRecorder.isTypeSupported,o=[];["webm","mp4","ogg","mov","avi","wmv","flv","mkv","ts","x-matroska"].forEach((n=>{const r=`video/${n}`;e.forEach((e=>{[`${r};codecs=${e}`,`${r};codecs=${e.toUpperCase()}`].forEach((e=>{t(e)&&o.push(e)}))})),t(r)&&o.push(r)})),w=o}async function S(){navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?(I(),s=null,a=null,l=null,f=0,h="00:00",g=[],b=[],(l=await navigator.mediaDevices.getDisplayMedia(r)).getVideoTracks()[0].addEventListener("ended",(()=>{I()})),console.log("screen-record mediaStream--",l),d&&(d.srcObject=l),s=new MediaRecorder(l,i),a=new MediaRecorder(l,i),s.ondataavailable=e=>{e.data.size>c&&(b=[e.data])},a.ondataavailable=e=>{e.data.size>c&&g.push(e.data)},s.start(),a.start(),f=(new Date).valueOf(),O(),v=setInterval((()=>{D()}),1e3),console.log("screen-record begin--")):alert("当前浏览器不支持屏幕捕捉或是当前访问头不支持使用navigator.mediaDevices")}function I(){if(j(),l)for(let e of l.getTracks())e.stop();s&&"inactive"!==s.state&&s.stop(),a&&"inactive"!==a.state&&a.stop(),console.log("screen-record stop--",h),z(),f=0,D("00:00")}function E(){s&&"inactive"!==s.state?(s.stop(),setTimeout((()=>{C(b),s.start()}),500)):C(b)}function R(){g.length?C(g):alert("请在结束共享后下载整片视频")}function j(){_&&(clearInterval(_),_=null),v&&(clearInterval(v),v=null),y&&(clearTimeout(y),y=null)}function C(e){if(null==e||0==e.length)return void alert("没有视频数据");let t=new Blob(e,{type:i.mimeType}),o=URL.createObjectURL(t);console.log("screen-record create--",o);let n=document.createElement("a");n.style="display: none",n.href=o,n.download=`${(new Date).getTime()}.${function(){if(x)return x;let e=i.mimeType.split("/")[1];return e.includes(";")&&(e=i.mimeType.split("/")[1].split(";")[0]),e}()}`,document.body.appendChild(n),n.click(),p&&(p.src=o),setTimeout((()=>{window.URL.revokeObjectURL(o),document.body.removeChild(n)}),1e3)}function P(e){return e?parseInt(e)>9?parseInt(e):"0"+parseInt(e):"00"}function D(e=""){let t=document.querySelector(".srtab__block_timing"),o=e||function(){if(!f)return"00:00";var e=parseInt(((new Date).valueOf()-f)/1e3),t=0,o=0;e>=60&&(t=parseInt(e/60),e=parseInt(e%60),t>=60&&(o=parseInt(t/60),t=parseInt(t%60)));var n=P(e);return n=t>0?P(t)+":"+n:"00:"+n,o>0&&(n=P(o)+":"+n),n}();h=o,t.innerHTML=o}function z(){if(f){y&&(clearTimeout(y),y=null);let e=document.querySelector(".srtab__btn");e.style.width="unset",e.style.height="24px",e.style.lineHeight="24px"}}function O(){if(f){let e=document.querySelector(".srtab__btn");y=setTimeout((()=>{e.style.width=0,e.style.height=0,e.style.lineHeight=0}),3e3)}}function M(){return new Promise(((e,t)=>{const o={part:"",whole:""};try{g.length&&(o.whole=new Blob(g,{type:i.mimeType})),b.length&&(o.part=new Blob(b,{type:i.mimeType})),e(o)}catch{e({whole:"",part:"",wholeTimes:h})}console.log("screen-record backData--")}))}function H(e,t=""){let o=document.createElement(e);return t.text&&(o.innerHTML=t.text),t.child&&o.append(...t.child),t.class&&(o.className=t.class),t.style&&(o.style.cssText=t.style),t.src&&(o.src=t.src),t.mouseover&&(o.onmouseover=t.mouseover),t.mouseenter&&(o.onmouseenter=t.mouseenter),t.mouseenter&&(o.onmouseleave=t.mouseleave),t.mouseout&&(o.onmouseout=t.mouseout),o}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}return o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),o(45)})(),e.exports=n()},627:function(e,t,o){"use strict";o(537)},628:function(e,t,o){var n=o(30),r=o(51),l=o(60),c=n((function(i){return i[1]})),d=r(l);c.push([e.i,'.none-style{display:none}.hide-element{border:0;height:0;margin:0;overflow:hidden;padding:0;width:0}@font-face{font-family:"AlibabaPuHuiTiH";font-style:normal;font-weight:400;src:url('+d+")}.plug__video_item{height:180px;margin:20px 0 0;width:320px}",""]),c.locals={},e.exports=c},798:function(e,t,o){"use strict";o.r(t);var n=o(113),r=o.n(n),l=o(626),c=o.n(l);console.log("is client"),console.log("is nuxt generator");var d={head:function(){},data:function(){return{febId:"feb-example"}},mounted:function(){console.log("page: is nuxt generator"),console.log("ewqr",c.a)},methods:{handleButton:function(e){"start"==e?startRecord():"stop"==e?stopRecord():download()},handleBack:function(){getBlobData().then((function(e){console.log("fewebrtc res",e)}))},chooseFile:function(data){console.log("选择文件",data.srcElement.files[0]),this.upload(data.srcElement.files)},upload:function(e){r.a.post("http://140.210.90.177:85/datasience/vbap3/dashboard/transfer/uploadFile",{file:formData},{headers:{guid:"datascience",token:"Vw9DfmP0jaTX3BPOmORpVx6XK0GhMzzQHtptQw1UsFlfgUervZ4dodCJk2F/VQWn8jTz9Tn3HlJfR0HS7Ikr+dJBpUIszowEhif8ShFWUC2owzjbgDfl5lL0BgLWntrPUekHZdgpjzQGOqpdRIvRjJx+X83Sv1djwQz30XmDVzNk2xFxnfd2EB/UoxrIEsstk4eqBciPkHvVR7c9BAT6dw==","Content-Type":"multipart/form-data"}})}}},m=(o(627),o(15)),component=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"plug"},[t("el-button",{on:{click:e.handleBack}},[e._v("下载Blob数据2")]),e._v(" "),t("div",{staticClass:"plug__video"},[t("div",[e._v("\n            live：\n            "),t("video",{staticClass:"plug__video_item",attrs:{id:"live",muted:"",src:"",autoplay:"",playbackRate:"2"},domProps:{muted:!0}})]),e._v(" "),t("div",[e._v("\n            down:\n            "),t("video",{staticClass:"plug__video_item",attrs:{id:"preview",controls:"controls",muted:"",src:"",autoplay:""},domProps:{muted:!0}})])]),e._v(" "),t("div",{attrs:{id:e.febId}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);